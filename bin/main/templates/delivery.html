<!DOCTYPE html>
<html lang="en">
    
<!-- Insert CSS and head JS here -->
<head th:replace="~{fragmentlinks :: headResourcesLinks}"></head>

<head>
    <!-- Custom CSS files -->
    <link rel="stylesheet" href="/css/employee.css">
    <link rel="stylesheet" href="/css/dashboard.css">

</head>

<body>

     <!-- Bootstrap Navigation Bar Start-->
    <div th:replace="~{topnavbar :: topNavBarFragment}"></div>

     <!-- Bootstrap Navigation Bar End-->
 
    <div class="container-fluid">

        <div class="row">
            <div class="col-12 fw-bold header p-2">
                <h2> <i class="fa-solid fa-motorcycle"></i> Delivery Management</h2>
            </div>
        </div><br>


        <div class="card p-3">
            <div class="row">
                <div class="col-12 text-end">
                    <!-- Button trigger offcanvas -->
                    <button type="button" class="btn offcanvas-btn fw-bold" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasDeliveryForm">
                        <i class="fa-solid fa-plus"></i> ADD A NEW DELIVERY
                    </button>
                    <!-- Helping text below the button -->
                    <small class="text-muted d-block mt-2">Click this to add a new delivery</small>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <table class="table table-hover table-script table-container table-bordered" id="tableDelivery">
                            <thead class="custom-thead fw-bold">
                                <tr>
                                    <th>#</th>
                                    <th>Delivery Code</th>
                                    <th>Order Code</th>
                                    <th>Rider</th>
                                    <th>Vehicle</th>
                                    <th>Customer</th>
                                    <th>Contact</th>
                                    <th>Address</th>
                                    <th>Total Bill</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody class="custom-tbody fw-bold" id="tableDeliveryBody">
                            </tbody>
                        </table>
                    </div>

                    <!-- Employee Status Icons Explanation (Inside the Card Footer) -->
                    <div class="card-footer text-center">
                        <!-- &nbsp; adds space, | is a separator, and another &nbsp; ensures spacing on both sides -->
                        <i class="fa-solid fa-motorcycle fa-lg text-warning"></i> <span class="ms-2">New</span>
                        &nbsp;
                        <i class="fa-solid fa-motorcycle fa-lg text-success"></i> <span class="ms-2">Delivered</span>
                        &nbsp;
                        <i class="fa-solid fa-motorcycle fa-lg text-primary"></i> <span class="ms-2"> Completed</span>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Form Off canvas -->
    <div class="offcanvas offcanvas-end" style="width: 50%;" tabindex="-1" id="offcanvasDeliveryForm">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title text-center w-100" ><i
                            class="fa-solid fa-motorcycle"></i> Delivery Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="card">
                        <div class="card-body">
                            <!-- Actions / methods -->
                            <form id="formDelivery" onsubmit="return false">
                                <!-- Required mark start -->
                                <div class="row mt-2">
                                    <div class="col-12 fw-bold text-end">
                                        <p>Required <span class="text-danger">*</span></p>
                                    </div>
                                </div>
                                <!-- Required mark end -->

                                <!-- Designation & Employee Status Start -->
                                <div class="row mt-2">
                                    <div class="col">
                                        <label for="selectOrder" class="form-label fw-bold">Select Order :
                                            <span class="text-danger">*</span></label>
                                        <select name="selectOrder" id="selectOrder" class="form-select"
                                            onchange="selectDynamicElementValidator(this,'delivery','order_process_id')">
                                        </select>
                                    </div>
                                    <div class="col">
                                        <label for="selectEmployee" class="form-label fw-bold">Select Employee :
                                            <span class="text-danger">*</span></label>
                                        <select name="selectEmployee" id="selectEmployee" class="form-select"
                                            onchange="selectDynamicElementValidator(this,'delivery','employee_id')">
                                        </select>
                                    </div>
                                </div>

                                <div class="row mt-2">
                                    <div class="col">
                                        <label for="selectVehicle" class="form-label fw-bold">Select Vehicle :
                                            <span class="text-danger">*</span></label>
                                        <select name="selectVehicle" id="selectVehicle" class="form-select"
                                            onchange="selectDynamicElementValidator(this,'delivery','vehicle_id')">
                                        </select>
                                    </div>

                                    <div class="col">
                                        <label for="selectStatus" class="form-label fw-bold">Select Status :
                                            <span class="text-danger">*</span></label>
                                        <select name="selectStatus" id="selectStatus" class="form-select"
                                            onchange="selectDynamicElementValidator(this,'delivery','deliverystatus_id')">
                                        </select>
                                    </div>
                                </div><br>
                        
                                <!-- Add/Update/Delete/Submit Buttons Start -->
                                <div class="row mt-2">

                                    <div class="col-3 text-start">
                                        <button type="button" class=" custom-btn btn btn-outline-info btn-sm fw-bold" onclick="clearDeliveryForm()">
                                            <i class="fa-solid fa-recycle fa-sm"></i> Clear
                                        </button>
                                    </div>
                                    <div class="col-9 text-end">

                                        <button type="submit" id="buttonUpdate" onclick="buttonDeliveryUpdate()"
                                            class=" custom-btn btn btn-outline-warning me-2 fw-bold btn-sm">
                                            <i class="fa-solid fa-user-check"></i> Update
                                        </button>


                                        <button type="submit" id="buttonSubmit" class=" custom-btn btn btn-outline-success fw-bold btn-sm"
                                            onclick="buttonDeliverySubmit(this)">
                                            Submit   <i class="fa-solid fa-paper-plane fa-sm"></i></i></button>
                                    </div>
                                </div>
                                <!-- Add/Update/Delete/Submit Buttons End -->
                            </form>
                        </div>
                    </div>
                </div>
    </div>



    <!-- Off-Canvas for View Employee Details -->
    <div class="offcanvas offcanvas-end" style="width: 50%;" tabindex="-1" id="offcanvasDeliveryView"
        data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="offcanvas-header d-flex justify-content-center w-100">
            <h5 class="offcanvas-title text-center flex-grow-1"><i class="fa-solid fa-motorcycle"></i> View Delivery
                Details</h5>
            <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div class="card">
                <div class="card-body">
                    <table class="table table-hover table-container table-bordered" id="tableDeliveryView">
                        <tr>
                            <th>Code</th>
                            <td id="tdCode"></td>
                        </tr>
                        <tr>
                            <th> Order Id</th>
                            <td id="tdOrder"></td>
                        </tr>
                     
                        <tr>
                            <th>Employee</th>
                            <td id="tdEmployee"></td>
                        </tr>
                        <tr>
                            <th>Vehicle</th>
                            <td id="tdVehicle"></td>
                        </tr>
                        <tr>
                            <th>Status</th>
                            <td id="tdStatus"></td>
                        </tr>
                     
                    </table>
                </div>
                <div class="card-footer text-end p-3">
                    <button class="custom-btn btn btn-outline-info btn-sm fw-bold" onclick="buttonPrintRow()">
                        <i class="fa-solid fa-print fa-sm"></i> Print
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/commonTableFunction.js"></script>
    <script src="/uicontroller/delivery.js"></script>
    <script src="/js/validationFunction.js"></script>
    <script src="/js/commonFunction.js"></script>


</body>

</html>