<!DOCTYPE html>
<html lang="en">

<!-- Insert CSS and head JS here -->

<head th:replace="~{fragmentlinks :: headResourcesLinks}"></head>

<head>
    <!-- Custom CSS files -->
    <link rel="stylesheet" href="/css/employee.css">
    <link rel="stylesheet" href="/css/dashboard.css">

</head>


<body>

    <!-- Bootstrap Navigation Bar Start-->
    <div th:replace="~{topnavbar :: topNavBarFragment}"></div>
    <!-- Bootstrap Navigation Bar End-->
     
    <div class="container-fluid">

        <div class="row mt-2 p-2">
            <div class="col-12 fw-bold header p-2">
                <h2> <i class="fa-solid fa-building"></i> Supplier Management</h2>
            </div>
        </div><br>


        <div class="card p-3">
            <div class="row">
                <div class="col-12 text-end">
                    <!-- Button trigger offcanvas -->
                    <button type="button" class="btn offcanvas-btn fw-bold" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasSupplierForm">
                        <i class="fa-solid fa-plus"></i> ADD A NEW SUPPLIER
                    </button>
                    <!-- Helping text below the button -->
                    <small class="text-muted d-block mt-2">Click this to add a new supplier</small>
                </div>
            </div>
        </div>

        <!--Start Table Area-->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <table class="table table-hover table-script table-container table-bordered" id="tableSupplier">
                            <thead class="custom-thead fw-bold">
                                <tr>
                                    <th>#</th>
                                    <th>Name</th>
                                    <th>Mobile No</th>
                                    <th>Email</th>
                                    <th>Address</th>
                                    <th>Status</th>
                                    <th>Modify</th>
                                </tr>
                            </thead>
                            <tbody class="custom-tbody fw-bold" id="tableSupplierBody">
                            </tbody>
                        </table>
                    </div>
                    <!-- End Table Area -->

                    <!-- Supplier Status Icons Explanation (Inside the Card Footer) -->
                    <div class="card-footer text-center">
                        <!-- &nbsp; adds space, | is a separator, and another &nbsp; ensures spacing on both sides -->
                        <i class="fa-solid fa-building fa-lg text-success"></i> <span class="ms-2">Available</span> &nbsp;
                        <i class="fa-solid fa-building fa-lg text-warning"></i> <span class="ms-2">Not-Available</span> &nbsp;
                        <i class="fa-solid fa-building fa-lg text-danger"></i> <span class="ms-2">Removed</span>
                    </div>
                </div>
            </div>
        </div>

    </div>


      <!-- Form Off canvas -->
      <div class="offcanvas offcanvas-end" style="width: 50%;" tabindex="-1" id="offcanvasSupplierForm" role="dialog">
        <div class="offcanvas-content">
            <div class="offcanvas-dialog">
                <div class="offcanvas-header" aria-labelledby="offcanvasExampleLabel">
                    <h5 class="offcanvas-title text-center w-100" id="offcanvasExampleLabel">
                    <i class="fa-solid fa-building"></i> Supplier Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="card">
                        <div class="card-body">
                            <!-- Actions / methods -->
                            <form id="formSupplier" onsubmit="return false">
                                <!-- Required mark start -->
                                <div class="row mt-2">
                                    <div class="col-12 fw-bold text-end">
                                        <p>Required <span class="text-danger">*</span></p>
                                    </div>
                                </div>
                                <!-- Required mark end -->

                                <!-- Supplier name start -->
                                <div class="row mt-2">
                                    <label for="textSupplierName" class="form-label col-4 fw-bold">Supplier Name : <span class="text-danger">*</span></label>
                                    
                                    <div class="col-12">
                                        <input type="text" class="form-control" id="textSupplierName"
                                            placeholder="Enter Supplier Name" onkeyup="commonTextValidator(this,'^[A-Za-z0-9 .,&-]{3,200}$','supplier','suppliername')" required>
                                    </div>
                                </div>
                                <!-- Supplier name end -->

                                <!-- Mobile NO & land No Start -->
                                <div class="row mt-2">
                                    <div class="col">
                                        <label for="textMobile" class="form-label fw-bold">Mobile Number : <span class="text-danger">*</span></label>
                                        <input type="text" required placeholder="Enter Mobile Number" id="textMobile" class="form-control"
                                        onkeyup="commonTextValidator(this,'^[0][7][01245678][0-9]{7}$','supplier','mobileno')">
                                    </div>
                                    <div class="col">
                                        <label for="textLand" class="form-label fw-bold">Land Number : </label>
                                        <input type="text" placeholder="Enter Land Number" id="textLand"
                                            class="form-control"
                                            onkeyup="commonTextValidator(this,'^[0][123456789][0-9]{8}$','supplier','landno')">
                                    </div>
                                </div>
                                <!-- Mobile NO & land No End -->

                                <!-- Email Brn Start -->
                                <div class="row mt-2">
                                    <div class="col fw-bold">
                                        <label for="textEmail" class="form-label">Email : <span class="text-danger">*</span> </label>
                                    </div>

                                    <div class="col fw-bold">
                                        <label for="textBrn" class="form-label col-4 fw-bold">BRN: <span class="text-danger">*</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="row mt-2">
                                    <div class="col">
                                        <input type="text" class="form-control" id="textEmail" name="textEmail"
                                            placeholder="Enter Email"
                                            onkeyup="commonTextValidator(this,'^[A-Za-z0-9]{5,20}[@][a-z]{4,8}[.][a-z]{2,3}$','supplier','email')" required>
                                    </div>

                                  <div class="col">
                                    <input type="text" class="form-control" id="textBrn"
                                        placeholder="Enter Business Registration No"
                                        onkeyup="commonTextValidator(this,'^(PV\\d{6}|BR\\d{8}|\\d{9})$','supplier','brn')" required>
                                        <!-- Ex : PV123456 BR12345678 123456789 -->
                                </div>

                              </div>
                                <!-- Email Brn End -->

                              <!-- Bank No Branch Start -->
                                <div class="row mt-2">
                                    <div class="col fw-bold">
                                        <label for="textBankName" class="form-label">Bank Name : <span class="text-danger">*</span> </label>
                                    </div>

                                    <div class="col fw-bold">
                                        <label for="textBankBranch" class="form-label col-4 fw-bold">Branch : <span class="text-danger">*</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="row mt-2">
                                    <div class="col">
                                        <input type="text" class="form-control" id="textBankName"
                                            placeholder="Enter Bank Name"
                                            onkeyup="commonTextValidator(this,'^[A-Za-z0-9 .,&-]{3,200}$','supplier','bank_name')" required>
                                    </div>

                                    <div class="col">
                                        <input type="text" class="form-control" id="textBankBranch"
                                            placeholder="Enter Branch Name" 
                                            onkeyup="commonTextValidator(this,'^[A-Za-z0-9 .,&-]{3,200}$','supplier','branch_name')" required>
                                    </div>
                              </div>
                               <!-- Bank No Branch End -->

                              <!-- Holder Name Account No Start -->
                                <div class="row mt-2">
                                    <div class="col fw-bold">
                                        <label for="textHolderName" class="form-label">Holder's Name : <span class="text-danger">*</span> </label>
                                    </div>

                                    <div class="col fw-bold">
                                        <label for="textAccountNo" class="form-label col-4 fw-bold">Account : <span class="text-danger">*</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="row mt-2">
                                    <div class="col">
                                        <input type="text" class="form-control" id="textHolderName" name="textHolderName"
                                            placeholder="Enter Holder's Name"
                                            onkeyup="commonTextValidator(this,'^[A-Za-z .-]{2,100}$','supplier','holder_name')" required >
                                    </div>

                                    <div class="col">
                                        <input type="text" class="form-control" id="textAccountNo"
                                            placeholder="Enter Account No" 
                                            onkeyup="commonTextValidator(this,'^[0-9]{5,12}$','supplier','account_no')" required>
                                    </div>
                              </div>
                              <!-- Holder Name Account No End -->


                                <!--  Address Status Start -->
                                <div class="row mt-2">
                    
                                    <div class="col">
                                        <label for="selectSupplierStatus" class="form-label fw-bold">
                                        Supplier Status : <span class="text-danger">*</span></label>
                                    </div>

                                    <div class="col fw-bold">
                                        <label for="textAddress" class="form-label">Address : <span class="text-danger">*</span> </label>
                                    </div>
                                </div>

                                <div class="row mt-2">
                                    
                                    <div class="col">
                                        <select id="selectSupplierStatus" class="form-select"
                                            onchange="selectDynamicElementValidator(this,'supplier','supplier_status_id')" required>
                                        </select>
                                    </div>

                                    <div class="col">
                                        <textarea type="text" class="form-control" id="textAddress" name="textAddress"
                                            placeholder="Enter Address"
                                            onkeyup="commonTextValidator(this,'^[A-Za-z0-9\\s\\.\\,\\!\\?\\()\\/\\-]{1,200}$','supplier','address')" required></textarea>
                                    </div>
                              </div> <br>
                                <!-- Address Status  End -->


                              <div class="row mt-4 justify-content-center align-items-center">
                            <!-- All Items Column -->
                            <div class="col-5">
                                <label for="selectAllItem" class="form-label fw-bold">All Items :</label>
                                <select id="selectAllItem" class="form-select fw-bold" multiple size="8">
                            <!-- Dynamic options go here -->
                                </select>
                            </div>

                            <!-- Button Controls -->
                            <div class="col-2 text-center d-flex flex-column align-items-center justify-content-center gap-3">
                                <button type="button" onclick="addSelectedItem()" class="btn btn-outline-primary btn-xs">&gt;</button>

                                <button type="button" onclick="addAllItems()"  class="btn btn-outline-primary btn-xs">&gt;&gt;</button>

                                <button type="button" onclick="removeSelectedItem()" class="btn btn-outline-danger btn-xs">&lt;</button>

                                <button type="button" onclick="removeAllItems()" class="btn btn-outline-danger btn-xs">&lt;&lt;</button>
                            </div>

                            <!-- Selected Items Column -->
                            <div class="col-5">
                                <label for="selectSelectedItem" class="form-label fw-bold">Selected Items :</label>
                                <select id="selectSelectedItem" class="form-select fw-bold" multiple size="8">
                                <!-- Dynamic options go here -->
                                </select>
                            </div>
                        </div>

                                 <!-- Note start -->
                                    <div class="row mt-2">
                                        <div class="col-10 fw-bold">
                                            <label for="textNote" class="form-label"> Note :</label>
    
                                           <textarea type="text" class="form-control" id="textNote"            placeholder="Enter Note"
                                            onkeyup="commonTextValidator(this,'^[A-Za-z0-9\\s\\.\\,\\!\\?\\()\\/\\-]{1,200}$','employee','note')"></textarea>
                                        </div>
                                    </div><br><br>
                                    <!-- Note end -->



                                <!-- Add/Update/Delete/Submit Buttons Start -->
                                <div class="row mt-2">

                                    <div class="col-3 text-start">
                                        <button type="button" class=" custom-btn btn btn-outline-info btn-sm fw-bold" onclick="clearSupplierForm()">
                                            <i class="fa-solid fa-recycle fa-sm"></i> Clear
                                        </button>
                                    </div>
                                    <div class="col-9 text-end">

                                        <button type="submit" onclick="buttonSupplierUpdate()"
                                            class=" custom-btn btn btn-outline-warning me-2 fw-bold btn-sm" id="buttonUpdate">
                                            <i class="fa-solid fa-user-check"></i> Update
                                        </button>


                                        <button type="submit" class=" custom-btn btn btn-outline-success fw-bold btn-sm"
                                            onclick="buttonSupplierSubmit(this)" id="buttonSubmit">
                                            Submit   <i class="fa-solid fa-paper-plane fa-sm"></i></button>
                                    </div>
                                </div>
                                <!-- Add/Update/Delete/Submit Buttons End -->
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Off-Canvas for View Supplier Details -->
    <div class="offcanvas offcanvas-end" style="width: 50%;" tabindex="-1" id="offcanvasSupplierView"
        data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="offcanvas-header d-flex justify-content-center w-100">
            <h5 class="offcanvas-title text-center flex-grow-1"><i class="fa-solid fa-user-tie"></i> View Supplier Details</h5>
            <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div class="card">
                <div class="card-body">
                    <table class="table table-hover table-container table-bordered" id="tableSupplierView">
                        <tr>
                            <th>Supplier Name</th>
                            <td id="tdSupplierName"></td>
                        </tr>
                        
                        <tr>
                            <th>Mobile No</th>
                            <td id="tdSupplierMobileno"></td>
                        </tr>
                       
                        <tr>
                            <th>Email</th>
                            <td id="tdSupplierEmail"></td>
                        </tr>
                        <tr>
                            <th>BRN</th>
                            <td id="tdSupplierBrn"></td>
                        </tr>
                        <tr>
                            <th>Bank Name</th>
                            <td id="tdSupplierBankName"></td>
                        </tr>
                        <tr>
                            <th>Branch Name</th>
                            <td id="tdSupplierBranchName"></td>
                        </tr>
                        <tr>
                            <th>Holder's Name</th>
                            <td id="tdSupplierHolderName"></td>
                        </tr>
                        <tr>
                            <th>Account No</th>
                            <td id="tdSupplierAccNo"></td>
                        </tr>
                        <tr>
                            <th>Status</th>
                            <td id="tdSupplierStatus"></td>
                        </tr>

                        <tr>
                            <th>Address</th>
                            <td id="tdSupplierAddress"></td>
                        </tr>
                    </table>
                </div>
                <div class="card-footer text-end p-3">
                    <button class="custom-btn btn btn-outline-info btn-sm fw-bold" onclick="buttonPrintRow()">
                        <i class="fa-solid fa-print fa-sm"></i> Print
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/commonTableFunction.js"></script>
    <script src="/js/validationFunction.js"></script>
    <script src="/js/commonFunction.js"></script>
    <script src="/uicontroller/supplier.js"></script>
   
</body>

</html>