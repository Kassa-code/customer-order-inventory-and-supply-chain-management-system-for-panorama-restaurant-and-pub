<!DOCTYPE html>
<html lang="en">
<!-- Insert CSS and head JS here -->

<head th:replace="~{fragmentlinks :: headResourcesLinks}"></head>

<head>
    <!-- Custom CSS files -->
    <link rel="stylesheet" href="/css/employee.css">
    <link rel="stylesheet" href="/css/dashboard.css">

</head>

<body>

    <!-- Bootstrap Navigation Bar Start-->
    <div th:replace="~{topnavbar :: topNavBarFragment}"></div>
    <!-- Bootstrap Navigation Bar End-->


    <div class="container-fluid">

        <div class="row mt-2 p-2">
            <div class="col-12 fw-bold header p-2">
                <h2> <i class="fa-solid fa-file-invoice-dollar"></i> Supplier Payment Management</h2>
            </div>
        </div><br>


        <div class="card p-3">
            <div class="row">
                <div class="col-12 text-end">
                    <!-- Button trigger offcanvas -->
                    <button type="button" class="btn offcanvas-btn fw-bold" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasSupplierPaymentForm">
                        <i class="fa-solid fa-plus"></i> ADD A NEW SUPPLIER PAYMENT
                    </button>
                    <!-- Helping text below the button -->
                    <small class="text-muted d-block mt-2">Click this to add a new supplier payment</small>
                </div>
            </div>
        </div>

        <!--Start Table Area-->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <table class="table table-hover table-script table-container table-bordered" id="tableSupplierPayment">
                            <thead class="custom-thead fw-bold">
                                <tr>
                                    <th>#</th>
                                    <th>Bill No</th>
                                    <th>GRN No</th>
                                    <th>Supplier</th>
                                    <th>Payment Method</th>
                                    <th>Total Amount</th>
                                    <th>Amount Paid</th>
                                    <th>Balance</th>
                                    <th>Status</th>
                                    <th>Modify</th>
                                </tr>
                            </thead>
                            <tbody class="custom-tbody fw-bold" id="tableSupplierPaymentBody">
                            </tbody>
                        </table>
                        
                    </div>
                    <!-- End Table Area -->

                    <!-- Supplier Status Icons Explanation (Inside the Card Footer) -->
                    <div class="card-footer text-center">
                        <!-- &nbsp; adds space, | is a separator, and another &nbsp; ensures spacing on both sides -->
                        <i class="fa-solid fa-file-invoice-dollar fa-lg text-danger"></i> <span class="ms-2"> Pending</span> &nbsp;
                        <i class="fa-solid fa-file-invoice-dollar fa-lg text-warning"></i> <span class="ms-2"> Partially Completed</span> &nbsp;
                        <i class="fa-solid fa-file-invoice-dollar fa-lg text-success"></i> <span class="ms-2"> Completed</span>
                        
                    </div>
                </div>
            </div>
        </div>

    </div>


      <!-- Form Off canvas -->
      <div class="offcanvas offcanvas-end" style="width: 50%;" tabindex="-1" id="offcanvasSupplierPaymentForm" role="dialog">
        <div class="offcanvas-content">
            <div class="offcanvas-dialog">
                <div class="offcanvas-header" aria-labelledby="offcanvasExampleLabel">
                    <h5 class="offcanvas-title text-center w-100" id="offcanvasExampleLabel">
                    <i class="fa-solid fa-file-invoice-dollar"></i> Supplier Payment Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="card">
                        <div class="card-body">
                            <!-- Supplier Payment Form -->
                            <form id="formSupplierPayment" onsubmit="return false">
                            
                                <!-- ======================= Required Note Row =================== -->
                                <div class="row mt-2">
                                    <div class="col-12 fw-bold mt-2">
                                        <p class="text-end">Required <span class="text-danger">*</span></p>
                                    </div>
                                </div>
                            
                                <!-- ======================= Payment Details ======================= -->
                                <div class="row mt-2">
                                   
                                    <!-- Supplier -->
                                    <div class="col-6" id="colSelectSupplier">
                                        <label for="selectSupplier" class="form-label fw-bold">Supplier : <span class="text-danger">*</span></label>
                                        <select id="selectSupplier" class="form-select" required onchange="selectDynamicElementValidator(this,'supplierPayment','supplier_id');filterGrnsIncompleteBySupplier();">
                                        </select>
                                    </div>

                                    <!-- GRN -->
                                    <div class="col-6" id="colSelectGRN">
                                        <label for="selectGRN" class="form-label fw-bold">GRN No : <span class="text-danger">*</span></label>
                                        <select id="selectGRN" class="form-select" required
                                            onchange="selectDynamicElementValidator(this,'supplierPayment','grn_id');generateDueAmount();">
                                        </select>
                                    </div>
                                </div>
                            
                                <div class="row mt-2">
                                    <!-- Due Amount -->
                                    <div class="col-6">
                                        <label for="textTotalAmount" class="form-label fw-bold">Due Amount : <span class="text-danger">*</span></label>
                                        <input type="text" id="textTotalAmount" class="form-control" placeholder="Enter Total Amount" required
                                        onkeyup="commonTextValidator(this,'^(([1-9][0-9]{0,6})|([1-9][0-9]{0,6}[.]{0,1}[0-9]{2}))$','supplierPayment','total_amount');calculateBalanceAmount();">
                                    </div>
                            
                                    <!-- Payment Method -->
                                    <div class="col-6">
                                        <label for="selectPaymentMethod" class="form-label fw-bold">Payment Method : <span
                                                class="text-danger">*</span></label>
                                        <select id="selectPaymentMethod" class="form-select" required onchange="selectDynamicElementValidator(this,'supplierPayment','supplierpaymentmethod_id');">
                                        </select>
                                    </div>
                                </div>
                            
                                <div class="row mt-2">
                                   
                                    <!-- Payment Amount -->
                                    <div class="col-6">
                                        <label for="textPaymentAmount" class="form-label fw-bold">Payment Amount : </label>
                                        <input type="text" id="textPaymentAmount" class="form-control" placeholder="Enter Payment Amount" onkeyup="commonTextValidator(this,'^(([1-9][0-9]{0,6})|([1-9][0-9]{0,6}[.]{0,1}[0-9]{2}))$','supplierPayment','payment_amount');calculateBalanceAmount();">
                                    </div>

                                    <!-- Balance Amount -->
                                    <div class="col-6">
                                        <label for="textBalanceAmount" class="form-label fw-bold">Balance Amount : <span class="text-danger">*</span></label>

                                        <input type="text" id="textBalanceAmount" required class="form-control" placeholder="Balance Amount"
                                        onkeyup="commonTextValidator(this,'^(([1-9][0-9]{0,6})|([1-9][0-9]{0,6}[.]{0,1}[0-9]{2}))$','supplierPayment','balance_amount')">
                                    </div>

                                </div>
                            
                                <div class="row mt-2">
    
                                    <!-- Payment Status -->
                                    <div class="col-6 d-none">
                                        <label for="selectPaymentStatus" class="form-label fw-bold">Payment Amount Status : <span
                                                class="text-danger">*</span></label>
                                        <select id="selectPaymentStatus" class="form-select" required onchange="selectDynamicElementValidator(this,'supplierPayment','supplierpaymentstatus_id');">
                                        </select>
                                    </div>

                                    
                                </div>
                            
                                <!-- ======================= Check / Transfer Info ======================= -->
                                <div class="row mt-2">
                                    <!-- Check No -->
                                    <div class="col-6 d-none" id="colTextCheckNo">
                                        <label for="textCheckNo" class="form-label fw-bold">Check No : <span class="text-danger">*</span></label>
                                        <input type="text" id="textCheckNo" class="form-control" placeholder="Enter Check No" required onkeyup="commonTextValidator(this,'^[A-Za-z0-9]{5,20}$','supplierPayment','check_no')">
                                    </div>
                            
                                    <!-- Check Date -->
                                    <div class="col-6 d-none" id="colTextCheckDate">
                                        <label for="textCheckDate" class="form-label fw-bold">Check Date : <span class="text-danger">*</span></label>
                                        <input type="date" id="textCheckDate" required class="form-control" onkeydown="return false"
                                        onchange="dateElementValidator(this,'supplierPayment','check_date')">
                                    </div>
                                </div>
                            
                                <div class="row mt-2">
                                    <!-- Transfer ID -->
                                    <div class="col-6 d-none" id="colTextTransferID">
                                        <label for="textTransferID" class="form-label fw-bold">Transfer ID : <span class="text-danger">*</span></label>
                                        <input type="text" id="textTransferID" class="form-control" placeholder="Enter Transfer ID" required onkeyup="commonTextValidator(this,'^[A-Za-z0-9]{5,20}$','supplierPayment','transfer_id')">
                                    </div>
                            
                                    <!-- Transfer DateTime -->
                                    <div class="col-6 d-none" id="colTextTransferDateTime">
                                        <label for="textTransferDateTime" class="form-label fw-bold">Transfer Date Time : <span class="text-danger">*</span></label>
                                        <input type="datetime-local" id="textTransferDateTime" name="transfer_date_time" class="form-control" required onkeydown="return false"
                                        onchange="dateElementValidator(this,'supplierPayment','transfer_date_time')">
                                    </div>
                                </div> <br>
                            
                                <!-- ======================= Buttons ======================= -->
                                <div class="row mt-4">
                                    <!-- Clear Button -->
                                    <div class="col-6 text-start">
                                        <button type="button" class="custom-btn btn btn-outline-info btn-sm fw-bold" onclick="clearSupplierPaymentForm()">
                                            <i class="fa-solid fa-recycle fa-sm"></i> Clear
                                        </button>
                                    </div>
                            
                                    <!-- Submit/Update Buttons -->
                                    <div class="col-6 text-end">
                                        <button type="submit" id="buttonUpdate" class="custom-btn btn btn-outline-warning me-2 fw-bold btn-sm"
                                            onclick="buttonSupplierPaymentUpdate(this)">
                                            <i class="fa-solid fa-pen-to-square fa-sm"></i> Update
                                        </button>
                                        <button type="submit" id="buttonSubmit" class="custom-btn btn btn-outline-success fw-bold btn-sm"
                                            onclick="buttonSupplierPaymentSubmit(this)">
                                            <i class="fa-solid fa-paper-plane fa-sm"></i> Submit
                                        </button>
                                    </div>
                                </div>
                            
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Off-Canvas for View Supplier Payment Details -->
    <div class="offcanvas offcanvas-end" style="width: 50%;" tabindex="-1" id="offcanvasSupplierView"
        data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="offcanvas-header d-flex justify-content-center w-100">
            <h5 class="offcanvas-title text-center flex-grow-1">
                <i class="fa-solid fa-file-invoice-dollar"></i> View Supplier Payment Details
            </h5>
            <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div class="card">
                <div class="card-body">
                    <table class="table table-hover table-container table-bordered" id="tableSupplierView">
                        <tr>
                            <th>Bill No</th>
                            <td id="tdViewBillNo"></td>
                        </tr>
                        <tr>
                            <th>Supplier</th>
                            <td id="tdViewSupplierName"></td>
                        </tr>
                        <tr>
                            <th>GRN No</th>
                            <td id="tdViewGRNNo"></td>
                        </tr>
                        
                        <tr>
                            <th>Total Amount</th>
                            <td id="tdViewTotalAmount"></td>
                        </tr>

                        <tr>
                            <th>Payment Method</th>
                            <td id="tdViewPaymentMethod"></td>
                        </tr>
                        <tr>
                            <th>Payment Amount</th>
                            <td id="tdViewPaymentAmount"></td>
                        </tr>
                        <tr>
                            <th>Balance Amount</th>
                            <td id="tdViewBalanceAmount"></td>
                        </tr>
                        
                        <tr>
                            <th>Payment Status</th>
                            <td id="tdViewPaymentStatus"></td>
                        </tr>
                        <tr>
                            <th>Check No</th>
                            <td id="tdViewCheckNo"></td>
                        </tr>
                        <tr>
                            <th>Check Date</th>
                            <td id="tdViewCheckDate"></td>
                        </tr>
                        <tr>
                            <th>Transfer ID</th>
                            <td id="tdViewTransferID"></td>
                        </tr>
                        <tr>
                            <th>Transfer DateTime</th>
                            <td id="tdViewTransferDateTime"></td>
                        </tr>
                
                    </table>
                </div>
                <div class="card-footer text-end p-3">
                    <button class="custom-btn btn btn-outline-info btn-sm fw-bold" onclick="buttonPrintRow()">
                        <i class="fa-solid fa-print fa-sm"></i> Print
                    </button>
                </div>
            </div>
        </div>
    </div>


    <script src="/js/commonTableFunction.js"></script>
    <script src="/js/validationFunction.js"></script>
    <script src="/js/commonFunction.js"></script>
    <script src="/uicontroller/supplierpayment.js"></script>
   
</body>

</html>